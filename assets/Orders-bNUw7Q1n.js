import{c as y,j as e,s as r,r as d,u as C,a as w,b as P,f as L,d as I}from"./index-pfnS4xOQ.js";import{D as B}from"./Delete-CxAUNDer.js";const E=y(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),M=r.button`
  background-color: #93be56;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 8px;

  &:hover {
    background-color: #7ea44a;
  }
`,U=r.li`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-around;
  width: 94%;
  transition: width 0.3s ease;
  padding: 10px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  background-color: ${({isSelected:o})=>o?"#bded8aff":"#fff"};

  /* '#bded8aff' */

  box-shadow:
    0 2px 5px rgba(0, 0, 0, 0.2),
    0 4px 6px rgba(0, 0, 0, 0.2);

  &:hover {
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.2),
      0 16px 20px rgba(0, 0, 0, 0.2);
  }
`,R=r.p`
  margin: 0;
  font-size: 22px;
  color: #333;
  width: 100px;
`,H=r.button`
  display: flex;
  align-items: center;
  justify-content: center;

  width: 40px;
  height: 40px;

  background: transparent;
  border: 2px solid #586b77;
  border-radius: 50%;

  cursor: pointer;
  padding: 0;

  transition:
    border-color 0.2s ease,
    box-shadow 0.2s ease;

  &:hover {
    border-color: #e1483dff;
    box-shadow: 0 0 5px rgba(118, 168, 67, 0.6);
  }
`,$=r(B)({fontSize:20,color:"#776758ff",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))"}),T=r(M)`
  display: flex;
  align-items: center;
  justify-content: center;

  width: 40px;
  height: 40px;

  background: transparent;
  border: 2px solid #586b77;
  border-radius: 50%;

  cursor: pointer;
  padding: 0;

  &:hover {
    background: transparent !important;
    border: 2px solid #93be56;
  }
`,A=r(E)({fontSize:20,color:"#586B77",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))"}),F=r.p`
  font-size: 20px;
  color: #000;
  line-height: 1;
  margin: 0;
`,W=r.span`
  font-size: 14px;
  color: #586b77;
`,_=r.ul`
  display: flex;
  flex-direction: column;
`,N=r.li`
  font-size: 12px;
  color: #586b77;
`,V=r.li`
  font-size: 14px;
  color: #000;
`,X=r.ul`
  display: flex;
  flex-direction: column;
`,q=r.li`
  font-size: 12px;
  color: #586b77;
`,G=r.li`
  font-size: 14px;
  color: #000;
`,k=y(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),J=r.div`
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
`,K=r.div`
  position: fixed;
  display: flex;
  flex-direction: column;
  width: 500px;
  height: 200px;
  background-color: #cbcbcbff;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 4px;
  z-index: 1001;

  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,Q=r.button`
  position: absolute;
  top: -15px;
  right: -15px;
  background-color: #fff;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  padding: 0;

  box-shadow: 0 2px 5px rgba(0,0,0,0.2), 0 4px 6px rgba(0,0,0,0.2);

  &:hover {
    background-color: #f44336;
    & svg {
      color: #fff;
    }
  }
`,Y=r(k)`
  color: #f44336;
  font-size: 24px;
  transition: color 0.3s ease;
`,Z=r.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 70%;
  background-color: #f9f9f9;
`,ee=r.h3`
  color: #000;
  margin-bottom: 18px;
`,re=r.p`
  color: #000;
`;r.div`
  width: 100%;
  height: 30%;
  box-sizing: border-box;
  display: flex;
  align-items: flex-end;
  padding: 10px;
  background-color: #93be56;
`;const oe=r.div`
  width: 100%;
  height: 30%;
  box-sizing: border-box;
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  padding: 10px;
  gap: 10px;
  background-color: #93be56;
  
`,te=r.button`
  background-color: transparent;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;

  &:hover {
    background-color: #fff;
    color: #93be56;
    border-color: #000;
    border-radius: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2), 0 4px 6px rgba(0,0,0,0.2);
  }
`,ne=r.button`
  background-color: transparent;
  color: #e1483dff;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;

  &:hover {
    background-color: #ff1a1a;
    color: #fff;
    border-color: #000;
    border-radius: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2), 0 4px 6px rgba(0,0,0,0.2);
  }
`,se=({open:o,onClose:n,onConfirm:c,itemName:a})=>(d.useEffect(()=>{const s=i=>{i.key==="Escape"&&n()};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[n]),o?e.jsx(J,{children:e.jsxs(K,{children:[e.jsx(Q,{onClick:n,children:e.jsx(Y,{})}),e.jsxs(Z,{children:[e.jsx(ee,{children:"Вы уверены что хотите удалить этот приход?"}),e.jsx(re,{children:a})]}),e.jsxs(oe,{children:[e.jsx(te,{onClick:n,children:"Отмена"}),e.jsx(ne,{onClick:c,children:"Удалить"})]})]})}):null),ie=d.memo(({order:o,onDelete:n,selectedOrderId:c,onToggleProducts:a})=>{const{_id:s,title:i,date:l,products:p}=o,[b,x]=d.useState(!1),[t,h]=d.useState(!1),f=d.useRef(null);d.useEffect(()=>{const u=new ResizeObserver(()=>{f.current&&h(f.current.offsetWidth<700)});return f.current&&u.observe(f.current),()=>u.disconnect()},[]);const v=()=>x(!0),z=()=>x(!1),D=()=>{n(s),x(!1)},O=p.reduce((u,g)=>{const m=g.price.find(j=>j.isDefault===0);return u+(m?.value||0)},0),S=p.reduce((u,g)=>{const m=g.price.find(j=>j.isDefault===1);return u+(m?.value||0)},0);return e.jsxs(e.Fragment,{children:[e.jsxs(U,{ref:f,isSelected:c===s,children:[!t&&e.jsx(R,{children:i}),e.jsx(T,{onClick:()=>a(s),children:e.jsx(A,{})}),e.jsxs(F,{children:[p.length," ",e.jsx("br",{}),e.jsx(W,{children:"Продукта"})]}),e.jsxs(_,{children:[e.jsx(N,{children:new Date(l).toLocaleDateString("ru-RU",{month:"2-digit",year:"numeric"}).split(".").join("/")}),e.jsx(V,{children:new Date(l).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric"}).replace(/\./g,"").replace(" г","").replace(/\s+/g,"/")})]}),!t&&e.jsxs(X,{children:[e.jsxs(q,{children:[O," $"]}),e.jsxs(G,{children:[S," UAH"]})]}),!t&&e.jsx(H,{onClick:v,children:e.jsx($,{})})]}),e.jsx(se,{open:b,onClose:z,onConfirm:D,itemName:i})]})}),ce=r.div`
  position: relative;
  width: 800px;
  height: 50%;
  background: #fff;
  box-shadow: -2px 0 6px rgba(0, 0, 0, 0.1);
  transform: translateX(${({$isOpen:o})=>o?"0":"100%"});
  transition: transform 0.3s ease-in-out;
  z-index: 100;

  padding: 20px;

  border: 1px solid #e0e0e0;
  border-radius: 8px;
  color: #000;

  box-shadow:
    0 2px 5px rgba(0, 0, 0, 0.2),
    0 4px 6px rgba(0, 0, 0, 0.2);
`,de=r.h3`
  margin-bottom: 16px;
`,ae=r.ul``,le=r.button`
  position: absolute;
  top: -15px;
  right: -15px;
  background-color: #fff;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  padding: 0;

  box-shadow:
    0 2px 5px rgba(0, 0, 0, 0.2),
    0 4px 6px rgba(0, 0, 0, 0.2);

  &:hover {
    background-color: #f44336;
    & svg {
      color: #fff;
    }
  }
`,pe=r(k)`
  color: #f44336;
  font-size: 24px;
  transition: color 0.3s ease;
`,xe=r.li`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-around;
  gap: 14px;
`,ue=r.img`
  font-size: 14px;
  color: #586b77;`,fe=r.p`
  font-size: 14px;
  color: #586b77;
`,be=r.p`
  font-size: 14px;
  color: #586b77;
`,he=({photo:o,specification:n,date:c})=>e.jsxs(xe,{children:[e.jsx(ue,{src:o,alt:n}),e.jsx(fe,{children:n}),e.jsx(be,{children:new Date(c).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric"}).replace(/\./g,"").replace(" г","").replace(/\s+/g,"/")})]}),ge=({products:o,onClose:n,isOpen:c})=>e.jsxs(ce,{$isOpen:c,children:[e.jsx(de,{children:"Products:"}),e.jsx(ae,{children:o.map(a=>{const{id:s,photo:i,specification:l,date:p}=a;return e.jsx(he,{photo:i,specification:l,date:p},s)})}),e.jsx(le,{onClick:n,children:e.jsx(pe,{})})]}),me=r.ul`
position: relative;
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  width: ${({shrink:o})=>o?"calc(100% - 400px)":"100%"};
  transition: width 0.3s ease;
`,je=()=>{const o=C(),{orders:n,loading:c,error:a}=w(t=>t.orders),s=w(P),[i,l]=d.useState(null);d.useEffect(()=>{o(L())},[o]);const p=t=>{o(I(t))},b=t=>{l(h=>h===t?null:t)},x=d.useMemo(()=>s?n.filter(t=>t.title.toLowerCase().includes(s.toLowerCase())):n,[n,s]);return c?e.jsx("div",{children:"Loading..."}):a?e.jsxs("div",{children:["Error: ",a]}):x.length===0?e.jsx("div",{children:"No orders found"}):e.jsxs(e.Fragment,{children:[e.jsx(me,{shrink:!!i,children:x.map(t=>e.jsx(ie,{order:t,onDelete:p,onToggleProducts:b,selectedOrderId:i},t._id))}),i&&e.jsx(ge,{isOpen:!!i,products:n.find(t=>t._id===i)?.products||[],onClose:()=>l(null)})]})},we=r.section`
  display: flex;
  gap: 5px;
  margin: 0 14px;
`,ve=()=>e.jsx(we,{children:e.jsx(je,{})});export{ve as default};
