import{c as w,j as e,s as o,r as x,u as O,a as j,b as D,f as C,d as z}from"./index-CFtDaaP2.js";import{D as S}from"./Delete-CV_j6L95.js";const B=w(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),L=o.button`
  background-color: #93be56;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 8px;

  &:hover {
    background-color: #7ea44a;
  }
`,P=o.li`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-around;
  width: 94%;
  transition: width 0.3s ease;
  padding: 10px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  margin-bottom: 16px;
  background-color: #fff;

  box-shadow:
    0 2px 5px rgba(0, 0, 0, 0.2),
    0 4px 6px rgba(0, 0, 0, 0.2);

  &:hover {
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.2),
      0 16px 20px rgba(0, 0, 0, 0.2);
  }
`,I=o.p`
  margin: 0;
  font-size: 22px;
  color: #333;
`,M=o.button`
  display: flex;
  align-items: center;
  justify-content: center;

  width: 40px;
  height: 40px;

  background: transparent;
  border: 2px solid #586b77;
  border-radius: 50%;

  cursor: pointer;
  padding: 0;

  transition:
    border-color 0.2s ease,
    box-shadow 0.2s ease;

  &:hover {
    border-color: #e1483dff;
    box-shadow: 0 0 5px rgba(118, 168, 67, 0.6);
  }
`,E=o(S)({fontSize:20,color:"#776758ff",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))"}),U=o(L)`
  display: flex;
  align-items: center;
  justify-content: center;

  width: 40px;
  height: 40px;

  background: transparent;
  border: 2px solid #586b77;
  border-radius: 50%;

  cursor: pointer;
  padding: 0;

  &:hover {
    background: transparent !important;
    border: 2px solid #93be56;
  }
`,H=o(B)({fontSize:20,color:"#586B77",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))"}),T=o.p`
  font-size: 20px;
  color: #000;
  line-height: 1;
  margin: 0;
`,$=o.span`
  font-size: 14px;
  color: #586b77;
`,A=o.ul`
  display: flex;
  flex-direction: column;
`,F=o.li`
  font-size: 12px;
  color: #586b77;
`,R=o.li`
  font-size: 14px;
  color: #000;
`,_=o.ul`
  display: flex;
  flex-direction: column;
`,N=o.li`
  font-size: 12px;
  color: #586b77;
`,W=o.li`
  font-size: 14px;
  color: #000;
`,V=w(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),X=o.div`
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
`,q=o.div`
  position: fixed;
  display: flex;
  flex-direction: column;
  width: 500px;
  height: 200px;
  background-color: #cbcbcbff;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 4px;
  z-index: 1001;

  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,G=o.button`
  position: absolute;
  top: -15px;
  right: -15px;
  background-color: #fff;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  padding: 0;

  box-shadow: 0 2px 5px rgba(0,0,0,0.2), 0 4px 6px rgba(0,0,0,0.2);

  &:hover {
    background-color: #f44336;
    & svg {
      color: #fff;
    }
  }
`,J=o(V)`
  color: #f44336;
  font-size: 24px;
  transition: color 0.3s ease;
`,K=o.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 70%;
  background-color: #f9f9f9;
`,Q=o.h3`
  color: #000;
  margin-bottom: 18px;
`,Y=o.p`
  color: #000;
`;o.div`
  width: 100%;
  height: 30%;
  box-sizing: border-box;
  display: flex;
  align-items: flex-end;
  padding: 10px;
  background-color: #93be56;
`;const Z=o.div`
  width: 100%;
  height: 30%;
  box-sizing: border-box;
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  padding: 10px;
  gap: 10px;
  background-color: #93be56;
  
`,ee=o.button`
  background-color: transparent;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;

  &:hover {
    background-color: #fff;
    color: #93be56;
    border-color: #000;
    border-radius: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2), 0 4px 6px rgba(0,0,0,0.2);
  }
`,oe=o.button`
  background-color: transparent;
  color: #e1483dff;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;

  &:hover {
    background-color: #ff1a1a;
    color: #fff;
    border-color: #000;
    border-radius: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2), 0 4px 6px rgba(0,0,0,0.2);
  }
`,re=({open:t,onClose:n,onConfirm:l,itemName:d})=>(x.useEffect(()=>{const i=s=>{s.key==="Escape"&&n()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[n]),t?e.jsx(X,{children:e.jsxs(q,{children:[e.jsx(G,{onClick:n,children:e.jsx(J,{})}),e.jsxs(K,{children:[e.jsx(Q,{children:"Вы уверены что хотите удалить этот приход?"}),e.jsx(Y,{children:d})]}),e.jsxs(Z,{children:[e.jsx(ee,{onClick:n,children:"Отмена"}),e.jsx(oe,{onClick:l,children:"Удалить"})]})]})}):null),te=x.memo(({order:t,onDelete:n,onToggleProducts:l})=>{const{_id:d,title:i,date:s,products:c}=t,[u,a]=x.useState(!1),p=()=>a(!0),r=()=>a(!1),f=()=>{n(d),a(!1)},k=c.reduce((h,b)=>{const g=b.price.find(m=>m.isDefault===0);return h+(g?.value||0)},0),v=c.reduce((h,b)=>{const g=b.price.find(m=>m.isDefault===1);return h+(g?.value||0)},0);return e.jsxs(e.Fragment,{children:[e.jsxs(P,{children:[e.jsx(I,{children:i}),e.jsx(U,{onClick:()=>l(d),children:e.jsx(H,{})}),e.jsxs(T,{children:[c.length," ",e.jsx("br",{}),e.jsx($,{children:"Продукта"})]}),e.jsxs(A,{children:[e.jsx(F,{children:new Date(s).toLocaleDateString("ru-RU",{month:"2-digit",year:"numeric"}).split(".").join("/")}),e.jsx(R,{children:new Date(s).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric"}).replace(/\./g,"").replace(" г","").replace(/\s+/g,"/")})]}),e.jsxs(_,{children:[e.jsxs(N,{children:[k," $"]}),e.jsxs(W,{children:[v," UAH"]})]}),e.jsx(M,{onClick:p,children:e.jsx(E,{})})]}),e.jsx(re,{open:u,onClose:r,onConfirm:f,itemName:i})]})}),y=o.div`
  position: fixed;
  top: 0;
  right: 0;
  width: 400px;
  height: 50%;
  background: #fff;
  box-shadow: -2px 0 6px rgba(0, 0, 0, 0.1);
  transform: translateX(${({$isOpen:t})=>t?"0":"100%"});
  transition: transform 0.3s ease-in-out;
  z-index: 100;
  padding: 20px;
  overflow-y: auto;

  border: 1px solid #000;
  color: #000;
`,ne=o.h3`
  margin-bottom: 16px;
`,se=o.ul`
  margin-bottom: 20px;
`,ie=o.li`
  margin-bottom: 8px;
`,de=o.button`
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
`,ce=({products:t,onClose:n,isOpen:l})=>e.jsxs(y,{$isOpen:l,children:[e.jsx(ne,{children:"Products:"}),e.jsx(se,{children:t.map(d=>{const{id:i,title:s,type:c,specification:u,price:a}=d,p=a.find(r=>r.isDefault===1);return e.jsxs(ie,{children:[s," — ",c," — ",u," — ",p?.value," ",p?.symbol]},i)})}),e.jsx(de,{onClick:n,children:"Close"})]}),le=o.ul`
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  width: ${({shrink:t})=>t?"calc(100% - 400px)":"100%"};
  transition: width 0.3s ease;
`,ae=()=>{const t=O(),{orders:n,loading:l,error:d}=j(r=>r.orders),i=j(D),[s,c]=x.useState(null);x.useEffect(()=>{t(C())},[t]);const u=r=>{t(z(r))},a=r=>{c(f=>f===r?null:r)},p=x.useMemo(()=>i?n.filter(r=>r.title.toLowerCase().includes(i.toLowerCase())):n,[n,i]);return l?e.jsx("div",{children:"Loading..."}):d?e.jsxs("div",{children:["Error: ",d]}):p.length===0?e.jsx("div",{children:"No orders found"}):e.jsxs(e.Fragment,{children:[e.jsx(le,{shrink:!!s,children:p.map(r=>e.jsx(te,{order:r,onDelete:u,onToggleProducts:a,selectedOrderId:s},r._id))}),e.jsx(y,{$isOpen:!!s,children:s&&e.jsx(ce,{isOpen:!!s,products:n.find(r=>r._id===s)?.products||[],onClose:()=>c(null)})})]})},pe=o.section``,fe=()=>e.jsx(pe,{children:e.jsx(ae,{})});export{fe as default};
